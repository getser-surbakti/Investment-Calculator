<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investment Result</title>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<style>
/* General body styling */
body {
font-family: Arial, sans-serif;
background-color: #f4f7f9; /* Light background for contrast */
color: #041E4F; /* Primary text color */
}

/* Header styling */
header {
background-color: #041E4F; /* Dark blue header */
padding: 20px 0;
color: #fff;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* Enhanced shadow */
}

.header-content {
max-width: 1200px;
margin: 0 auto;
}

.header-title {
font-size: 2.5rem;
font-weight: 700;
letter-spacing: 2px;
text-transform: uppercase;
color: #fff;
margin-bottom: 25px;
}

nav {
display: flex;
justify-content: center;
align-items: center;
margin-top: 10px;
}

/* Title Styling */
h1 {
font-size: 2.5rem;
font-weight: 600;
text-transform: uppercase;
letter-spacing: 2px;
margin-bottom: 20px;
color: #041E4F; /* Dark blue for titles */
}

h4, h5 {
color: #186B61; /* Teal for section headers */
}

/* Navbar Styling */
.nav-item {
margin-right: 20px;
position: relative;
}

.nav-link {
color: #fff;
font-size: 1rem;
font-weight: 500;
text-decoration: none;
transition: color 0.3s ease, transform 0.3s ease;
padding: 10px 15px;
border-radius: 8px;
background-color: #186B61; /* Teal for nav links */
}

.nav-link:hover {
color: #fff;
background-color: #145752; /* Darker teal on hover */
transform: translateY(-3px);
}

.nav-link.active {
background-color: #041E4F; /* Dark blue for active state */
color: #fff;
}

.nav-link.inactive {
background-color: #186B61; /* Teal for inactive state */
color: #fff;
}

/* Responsive Navbar */
@media (max-width: 768px) {
.nav {
    flex-direction: column;
    gap: 15px;
}

.header-title, h1 {
    font-size: 2rem;
}

.nav-item {
    text-align: center;
}
}

/* Footer Styling */
footer {
background-color: #041E4F; /* Dark blue footer */
color: #fff;
padding: 20px;
text-align: center;
margin-top: 20px;
}

footer a {
color: #fff;
text-decoration: none;
margin-right: 15px;
}

footer a:hover {
text-decoration: underline;
color: #186B61; /* Teal on hover */
}

footer p {
font-size: 0.875rem;
margin-top: 10px;
}

/* Collapsible section styles */
.section-content {
display: none;
}

.section-title {
cursor: pointer;
font-weight: bold;
color: #041E4F; /* Dark blue */
}

.section-title:hover {
color: #186B61; /* Teal on hover */
}

/* Table Styling */
.table {
border-color: #186B61; /* Teal borders */
}

.table thead th {
background-color: #041E4F; /* Dark blue header */
color: #fff;
text-align: center;
}

.table tbody tr:nth-child(odd) {
background-color: #f4f7f9; /* Light background for odd rows */
}

.table tbody tr:nth-child(even) {
background-color: #fff; /* White for even rows */
}

/* Button Styling */
.btn-primary {
background-color: #186B61; /* Teal button */
border-color: #186B61;
transition: background-color 0.3s ease;
}

.btn-primary:hover {
background-color: #145752; /* Darker teal on hover */
border-color: #145752;
}

/* Chart Container */
.chart-container {
display: flex;
justify-content: center;
align-items: center;
width: 100%;
height: auto;
margin-top: 20px;
}

#chart {
width: 100%;
max-width: 700px;
height: 300px;
}

/* Print-specific styles */
@media print {
.btn, .nav-tabs, .section-title, .print-btn {
    display: none;
}

#chart, #chart canvas {
    display: block !important;
    width: 100% !important;
    max-width: 700px !important;
    height: auto !important;
    margin: 0 auto !important;
}

.table {
    width: 100% !important;
    max-width: 700px !important;
    margin: 0 auto !important;
    font-size: 10px !important;
}

.table th, .table td {
    padding: 6px !important;
    text-align: center;
}

body {
    font-size: 12px;
    padding: 10px;
    background-color: #fff; /* White background for print */
}

.container {
    padding: 0;
}

.section-content {
    display: block !important;
    margin-bottom: 15px;
}

.row {
    margin-bottom: 15px;
}

h1, h4 {
    font-size: 16px;
    text-align: center;
}

.nav-tabs {
    display: none;
}

.text-center {
    text-align: center !important;
}
}

/* Mobile responsiveness */
@media (max-width: 768px) {
.table th, .table td {
    padding: 5px;
}

.container {
    padding: 12px;
}

.nav-tabs {
    flex-direction: column;
    margin-top: 20px;
}

.nav-link {
    font-size: 16px;
    padding: 12px;
    margin-bottom: 10px;
}

.nav-item {
    margin: 5px 0;
    padding: 0;
}
}
</style>

<header>
<div class="container">
<h1 class="text-center mb-4">Investment Calculator</h1>
</div>
</header>

<div class="container">
<!-- Detailed Inputs Summary -->
<div class="row mb-4">
<div class="col-12">
    <h4 class="text-center mb-4">üåê Investment Inputs:</h4>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Input Variables</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Initial Amount</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(principal) }}</td>
                </tr>
                <tr>
                    <td>Annual Rate</td>
                    <td>{{'{:,.1f}'.format(annual_rate*100)}}%</td>
                </tr>
                <tr>
                    <td>Years</td>
                    <td>{{ years }} years</td>
                </tr>
                <tr>
                    <td>Contribution Amount</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(contribution_amount) }} {{ contribution_frequency }}</td>
                </tr>
                <tr>
                    <td>Inflation Rate</td>
                    <td>{{'{:,.1f}'.format(inflation_rate*100)}}%</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

<!-- Summary of Capital -->
<div class="row mb-4">
<div class="col-12">
    <h4 class="text-center mb-4">üåê Total Money Invested:</h4>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Capital Type</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Principal</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(principal) }}</td>
                </tr>
                <tr>
                    <td>Total Contributions</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(contribution_amount * contribution_n * years) }}</td>
                </tr>
                <tr>
                    <td>Total Capital (Principal + Total Contributions)</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(principal + (contribution_amount * contribution_n * years)) }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

<!-- Summary of Balances -->
<div class="row mb-4">
<div class="col-12">
    <h4 class="text-center mb-4">üåê Summary of Balances:</h4>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Balance Type</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Final Balance Without Inflation</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(final_balance_without_inflation) }}</td>
                </tr>
                <tr>
                    <td>Final Balance With Inflation</td>
                    <td>{{ currency }} {{ '{:,.0f}'.format(final_balance_with_inflation) }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

<!-- Horizontal Navigation for Sections -->
<ul class="nav nav-tabs">
<li class="nav-item">
    <a class="nav-link active" href="javascript:void(0);" onclick="toggleSection('balance-without-inflation', this)">üìä Balance Without Inflation</a>
</li>
<li class="nav-item">
    <a class="nav-link inactive" href="javascript:void(0);" onclick="toggleSection('balance-with-inflation', this)">üìä Balance With Inflation</a>
</li>
<li class="nav-item">
    <a class="nav-link inactive" href="javascript:void(0);" onclick="toggleSection('chart', this)">üìà Comparative Chart</a>
</li>
</ul>

<!-- Section Content -->
<div class="mt-4">
<!-- Balance Without Inflation Section -->
<div id="balance-without-inflation" class="section-content">
    <h5 class="text-center">üìä Table 1: Balance Without Inflation</h5>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Year</th>
                    <th>Starting Balance</th>
                    <th>Interest Earned</th>
                    <th>Contributions</th>
                    <th>Ending Balance</th>
                </tr>
            </thead>
            <tbody>
                {% for year, details in yearly_summary_without_inflation.items() %}
                <tr>
                    <td>{{ year }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['starting_balance']) }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['interest_earned']) }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['contributions']) }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['ending_balance']) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Balance With Inflation Section -->
<div id="balance-with-inflation" class="section-content">
    <h5 class="text-center">üìä Table 2: Balance With Inflation</h5>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Year</th>
                    <th>Starting Balance</th>
                    <th>Interest Earned</th>
                    <th>Contributions</th>
                    <th>Ending Balance</th>
                </tr>
            </thead>
            <tbody>
                {% for year, details in yearly_summary_with_inflation.items() %}
                <tr>
                    <td>{{ year }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['starting_balance']) }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['interest_earned']) }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['contributions']) }}</td>
                    <td>{{ currency }} {{ '{:,.2f}'.format(details['ending_balance']) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Comparative Chart Section -->
<!-- Comparative Chart Section -->
<div id="chart" class="section-content">
<h5 class="text-center">üìà Comparative Chart: Investment Growth Breakdown</h5>
<div class="chart-container">
<canvas id="investmentChart" style="width:100%;height:auto;"></canvas>
</div>
<script>
var ctx = document.getElementById('investmentChart').getContext('2d');

// Data from Flask template
var principal = {{ principal }};
var yearly_contribution = {{ contribution_amount }} * ({{ 1 if contribution_frequency == 'annually' else 12 if contribution_frequency == 'monthly' else 4 if contribution_frequency == 'quarterly' else 1 }});
var years = {{ years }};
var totalCapitalData = Array.from({ length: years }, (_, i) => principal + yearly_contribution * (i + 1));

// Cumulative interest and contributions data
var interestWithoutInflationData = [];
var cumulativeContributionsData = [];
var cumulativeInterest = 0;
var cumulativeContributions = 0;
{% for year, details in yearly_summary_without_inflation.items() %}
cumulativeInterest += {{ details['interest_earned'] }};
cumulativeContributions += {{ details['contributions'] }};
interestWithoutInflationData.push(cumulativeInterest);
cumulativeContributionsData.push(cumulativeContributions);
{% endfor %}

// Gradient for lines
var gradientBlue = ctx.createLinearGradient(0, 0, 0, 300);
gradientBlue.addColorStop(0, '#041E4F');
gradientBlue.addColorStop(1, '#186B61');

var gradientTeal = ctx.createLinearGradient(0, 0, 0, 300);
gradientTeal.addColorStop(0, '#186B61');
gradientTeal.addColorStop(1, '#145752');

// Chart configuration
var investmentChart = new Chart(ctx, {
type: 'line',
data: {
    labels: [{% for year in range(1, years + 1) %}{{ year }},{% endfor %}],
    datasets: [
        {
            label: 'Balance Without Inflation',
            data: [{% for year, details in yearly_summary_without_inflation.items() %}{{ details['ending_balance'] }},{% endfor %}],
            borderColor: gradientBlue,
            backgroundColor: gradientBlue,
            pointBackgroundColor: '#041E4F',
            pointBorderColor: '#fff',
            pointRadius: 4,
            pointHoverRadius: 6,
            fill: false,
            tension: 0.4
        },
        {
            label: 'Balance With Inflation',
            data: [{% for year, details in yearly_summary_with_inflation.items() %}{{ details['ending_balance'] }},{% endfor %}],
            borderColor: gradientTeal,
            backgroundColor: gradientTeal,
            pointBackgroundColor: '#186B61',
            pointBorderColor: '#fff',
            pointRadius: 4,
            pointHoverRadius: 6,
            fill: false,
            tension: 0.4
        },
        {
            label: 'Total Capital (Principal + Contributions)',
            data: totalCapitalData,
            borderColor: '#145752',
            pointBackgroundColor: '#145752',
            pointBorderColor: '#fff',
            pointRadius: 4,
            pointHoverRadius: 6,
            borderDash: [5, 5],
            fill: false,
            tension: 0.4
        },
        {
            label: 'Cumulative Interest (No Inflation)',
            data: interestWithoutInflationData,
            borderColor: '#4682B4',
            pointBackgroundColor: '#4682B4',
            pointBorderColor: '#fff',
            pointRadius: 4,
            pointHoverRadius: 6,
            fill: false,
            tension: 0.4
        },
        {
            label: 'Cumulative Contributions',
            data: cumulativeContributionsData,
            borderColor: '#2E8B57',
            pointBackgroundColor: '#2E8B57',
            pointBorderColor: '#fff',
            pointRadius: 4,
            pointHoverRadius: 6,
            fill: false,
            tension: 0.4
        }
    ]
},
options: {
    responsive: true,
    plugins: {
        legend: {
            position: 'top',
            labels: {
                font: {
                    size: 12,
                    family: 'Arial',
                    weight: 'bold'
                },
                color: '#041E4F'
            }
        },
        tooltip: {
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(4, 30, 79, 0.9)', // Dark blue
            titleFont: { size: 14 },
            bodyFont: { size: 12 },
            padding: 10,
            borderColor: '#186B61',
            borderWidth: 1
        }
    },
    scales: {
        x: {
            title: {
                display: true,
                text: 'Years',
                color: '#041E4F',
                font: { size: 14, weight: 'bold' }
            },
            grid: {
                display: false
            }
        },
        y: {
            beginAtZero: true,
            title: {
                display: true,
                text: 'Amount ({{ currency }})',
                color: '#041E4F',
                font: { size: 14, weight: 'bold' }
            },
            grid: {
                color: '#e0e0e0'
            }
        }
    },
    interaction: {
        mode: 'nearest',
        axis: 'x',
        intersect: false
    },
    animation: {
        duration: 1000,
        easing: 'easeInOutQuart'
    }
}
});
</script>
</div>

<!-- "Print Report" Button -->
<div class="text-center mt-4">
<button class="btn btn-primary print-btn" onclick="window.print()">Print Report</button>
</div>
</div>

<footer>
<p>&copy; 2025 Investment Calculator. All rights reserved.</p>
</footer>

<script>
function toggleSection(id, element) {
var sections = document.querySelectorAll('.section-content');
sections.forEach(function(section) {
    section.style.display = 'none';
});
var section = document.getElementById(id);
section.style.display = 'block';
var navLinks = document.querySelectorAll('.nav-link');
navLinks.forEach(function(link) {
    link.classList.remove('active');
    link.classList.add('inactive');
});
element.classList.remove('inactive');
element.classList.add('active');
}
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>